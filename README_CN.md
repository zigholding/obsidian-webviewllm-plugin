# WebViewLLM - Obsidian AI 对话插件

## 简介

WebViewLLM 是一个强大的 Obsidian 插件，借助 WebViewer 功能，在 Obsidian 中集成多个主流 AI 大语言模型的聊天界面。通过这个插件，您可以在笔记软件中直接与多个 AI 模型进行对话，实现高效的 AI 协作和内容创作。

## 支持的 AI 模型

插件目前支持以下 AI 模型：

- **元宝 (Yuanbao)** - 智谱AI的对话模型
- **ChatGPT** - OpenAI 的对话模型
- **Kimi** - 月之暗面的智能助手
- **豆包 (Doubao)** - 字节跳动的 AI 助手
- **DeepSeek** - 深度求索的 AI 模型
- **ChatGLM** - 智谱AI的开源对话模型

## 主要功能

### 1. 多模型对话
- 同时打开多个 AI 模型的聊天窗口
- 支持在 Obsidian 中直接与不同 AI 进行对话
- 无需切换应用，提升工作效率

### 2. 智能消息发送
- 自动识别当前选中的文本
- 支持从 `prompt` 代码块或章节中提取内容
- 可配置提示词名称和提取规则

### 3. 连续对话协作
- 多个 AI 模型轮流对话，实现协作
- 支持自动停止条件配置
- 充分发挥"三个臭皮匠赛过诸葛亮"的效果

### 4. 内容格式转换
- 将 AI 回复内容转换为卡片格式
- 将 AI 回复内容转换为标签页格式
- 便于在 Obsidian 中组织和管理内容

## 命令说明

### 基础命令

#### 新建AI对话
- **命令**: `新建AI对话`
- **功能**: 创建新的 WebViewer 窗口，可选择打开任意支持的 AI 模型
- **使用**: 在命令面板中搜索并执行，然后选择要打开的 AI 模型

#### 向首个AI模型发送消息
- **命令**: `向首个AI模型发送消息`
- **功能**: 向第一个打开的 AI 窗口发送消息
- **消息来源优先级**:
  1. 当前笔记选中的文本
  2. `prompt` 代码块中的文本
  3. `prompt` 章节下的文本

#### 向所有AI模型发送消息
- **命令**: `向所有AI模型发送消息`
- **功能**: 向所有打开的 AI 窗口发送相同的消息
- **适用场景**: 需要多个 AI 同时回答同一问题

### 连续对话命令

#### 开始连续对话
- **命令**: `开始连续对话`
- **功能**: 启动 AI 模型间的连续对话模式
- **工作流程**: 
  1. 第一个 AI 的回复发送给第二个 AI
  2. 第二个 AI 的回复发送给下一个 AI
  3. 最后一个 AI 的回复发送给第一个 AI
  4. 如此循环，直到满足停止条件

#### 停止连续对话
- **命令**: `停止连续对话`
- **功能**: 手动停止连续对话模式
- **自动停止**: 当 AI 返回特定文本时自动停止（可在设置中配置）

### 内容处理命令

#### 将AI内容粘贴为卡片
- **命令**: `将AI内容粘贴为卡片`
- **功能**: 将 AI 的回复内容转换为 Obsidian 卡片格式
- **用途**: 便于在笔记中组织和管理 AI 生成的内容

#### 将AI内容粘贴为标签页
- **命令**: `将AI内容粘贴为标签页`
- **功能**: 将 AI 的回复内容转换为标签页格式
- **用途**: 创建结构化的内容分类

## 设置选项

### 提示词配置
- **提示词名称**: 设置用于提取提示词的代码块或章节名称
- **默认值**: `prompt`

### 自动停止配置
- **停止条件**: 设置当 AI 返回特定文本时自动结束连续对话
- **多条件支持**: 使用回车换行分隔多个停止词

### HTML 处理
- **跳过HTML标签**: 配置需要跳过的 HTML 类名，避免提取无关内容

## 使用示例

### 示例1: 协作修改提示词

1. **打开AI模型**: 使用"新建AI对话"打开元宝和 Kimi
2. **发送任务说明**: 使用"向所有AI模型发送消息"发送协作任务
3. **开始协作**: 选中原始提示词，使用"向首个AI模型发送消息"
4. **启动连续对话**: 执行"开始连续对话"，AI 将轮流修改提示词
5. **自动停止**: 当某个 AI 回复"修改完成"时，对话自动结束

### 示例2: 多模型对比分析

1. **同时提问**: 使用"向所有AI模型发送消息"向多个 AI 发送同一问题
2. **对比回复**: 比较不同 AI 的回答，获得更全面的视角
3. **内容整理**: 使用"将AI内容粘贴为卡片"将回复整理到笔记中

### 示例3: 内容创作协作

1. **分工协作**: 让不同 AI 负责不同方面的内容创作
2. **连续优化**: 使用连续对话让 AI 们轮流优化内容
3. **最终整合**: 将优化后的内容转换为合适的格式

## 安装方法

1. 在 Obsidian 中打开设置
2. 进入"第三方插件"
3. 关闭安全模式
4. 点击"浏览"搜索"WebViewLLM"
5. 安装并启用插件

## 注意事项

- 插件需要网络连接才能访问 AI 模型
- 某些 AI 模型可能需要登录或 API 密钥
- 连续对话功能会消耗较多资源，建议适度使用
- 建议在设置中配置合适的停止条件，避免无限循环

## 技术支持

如果您在使用过程中遇到问题，可以：
- 查看插件的设置页面
- 检查网络连接状态
- 确认 AI 模型服务是否正常
- 查看 Obsidian 的控制台日志

---

**WebViewLLM** - 让 AI 协作更简单，让创作更高效！ 